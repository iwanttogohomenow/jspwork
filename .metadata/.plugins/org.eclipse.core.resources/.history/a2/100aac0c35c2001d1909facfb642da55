<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ page import="java.sql.*"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Database SQL</title>
</head>
<body>
	<%@ include file="20_01_dbconn.jsp"%>
<%	
	request.setCharacterEncoding("UTF-8");
	String id = request.getParameter("id");
	String passwd = request.getParameter("passwd");
	String name = request.getParameter("name");

	ResultSet rs = null;
	Statement stmt = null;

	
	try {
		String sql = "select id, passwd from member where id = '" + id + "'";
		stmt = conn.createStatement();
		rs = stmt.executeQuery(sql);

		if (rs.next()) {

			String rId = rs.getString("id"); //admin
			String rPasswd = rs.getString("passwd"); //1234

			if (id.equals(rId) && passwd.equals(rPasswd)) {
			sql = "delete from member where id ='" + id + "'";
// 			stmt = conn.createStatement();
			int a = stmt.executeUpdate(sql);
			if(a ==0) 
			out.println("데이터와 일치하는 아이디가 없습니다.");
			else 
				out.println("데이터를 삭제했습니다");

	} catch (SQLException ex) {
		out.println("SQLException : " + ex.getMessage());
	
	
	} finally {
		if (rs != null)
			rs.close();
		if (stmt != null)
			stmt.close();
		if (conn != null)
			conn.close();
	}
%>	

</body>
</html>